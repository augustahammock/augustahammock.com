$(function(){var e,t,a=$(".form-item.validate"),r=$(".checkbox-options"),i=$(".button.submit"),n=$(".contact-failure-cta"),s=function(e){e.preventDefault(),$.each(a,function(e,t){var a=$($(t)[0]),r=a.find("input, textarea"),i=a.attr("data-validate"),n=a.attr("data-required"),s=a.find(".errors"),o={formItem:a,validateAs:i,required:n,errorList:s,value:$(r).val()};m(o)});var t=$(".has-error").length;if(0===t){var r={name:$(".form-item.name input").val(),email:$(".form-item.email input").val(),interest:"No interests specified",message:$(".form-item.message textarea").val()},i=$(".form-item.interest").find(".selected");0!=i.length&&(r.interest="",$.each(i,function(e,t){r.interest+=$(t).attr("data-value"),e==i.length-2&&2==i.length?r.interest+=" and ":e==i.length-2&&i.length>2?r.interest+=", and ":e!=i.length-1&&(r.interest+=", ")})),c(r)}},o=function(e){var t=$(e.currentTarget),a=t.val(),r=t.parent(),i=r.attr("data-validate"),n=r.attr("data-required"),s=r.find(".errors");data={formItem:r,field:t,value:a,validateAs:i,required:n,errorList:s},"focusin"==e.type?(r.removeClass("has-error"),s.find("li").hide()):m(data)},m=function(e){var t,a=e.errorList,r=e.value,i=e.validateAs,n={required:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*(_|[^\w])).+$/,string:/^[A-z0-9\s\.\,\:\;\!\?\(\)\/\-\'\"]*$/,email:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,options:[]},s=n[i],o=e.required,m=t=a.find(".invalid");if(o){if(t=a.find(".required"),""===$.trim(r))return e.formItem.addClass("has-error"),t.show(),m.hide(),!1;t.hide(),e.formItem.removeClass("has-error")}else if(!o&&""===r)return!1;e.options||(s.test(r)?(e.formItem.removeClass("has-error"),m.hide()):(e.formItem.addClass("has-error"),m.show()))},l=function(e){var t=$(e.currentTarget);t.hasClass("selected")?t.removeClass("selected"):t.addClass("selected")},c=function(a){console.log(a),e=a.interest,t=a.message,$.ajax({type:"POST",url:"https://mandrillapp.com/api/1.0/messages/send-template1.json",data:{key:"srG-xJXHlA6YNZAYKGq_wg",template_name:"augustahammock-com-contact-form",template_content:[{name:"name1",content:"name1"}],message:{global_merge_vars:[{name:"Name",content:a.name},{name:"Email",content:a.email},{name:"Interest",content:a.interest},{name:"Message",content:a.message}],merge:!0,from_email:"augusta@augustahammock.com",to:[{email:"augusta@augustahammock.com",name:"Augusta Hammock",type:"to"}],headers:{"Reply-To":a.email},autotext:"true",subject:"Inquiry: "+a.interest}},success:function(e){$(".form").animate({opacity:0},200).slideUp("slow"),$(".direct-contact-info").animate({opacity:0},200).slideUp("slow"),$(".contact-success").slideDown("slow").animate({opacity:1},200)},error:function(a){n.attr("href","mailto:augusta@augustahammock.com?subject=Inquiry: "+e+"&body="+t),$(".form").animate({opacity:0},200).slideUp("slow"),$(".direct-contact-info").animate({opacity:0},200).slideUp("slow"),$(".contact-failure").slideDown("slow").animate({opacity:1},200)}})};r.on("click","li",l),$("input, textarea").on("focusin focusout",o),i.on("click",s)});