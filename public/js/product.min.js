$(function(){function t(t){var a=t.options.map(function(t){var a=t.values.map(function(t){return'<option value="'+t+'">'+t+"</option>"});return'<div class="shopify-select">                <select class="select" name="'+t.name+'">'+a+'</select>                <svg class="shopify-select-icon" viewBox="0 0 24 24"><path d="M21 5.176l-9.086 9.353L3 5.176.686 7.647 12 19.382 23.314 7.647 21 5.176z"></path></svg>              </div>'});return a}function a(){$(".cart .btn--close").on("click",m),$(document).on("click",function(t){$(t.target).closest(".cart").length||$(t.target).closest(".js-prevent-cart-listener").length||m()});var t=27;$(document).on("keydown",function(a){a.which===t&&(w&&($(w).focus(),w=""),m())}),$(".btn--cart-checkout").on("click",function(){window.open(x.checkoutUrl,"_self")}),$(".buy-button").on("click",o),$(".cart").on("click",".quantity-increment",function(){var t=$(this).data("variant-id");d(t)}),$(".cart").on("click",".quantity-decrement",function(){var t=$(this).data("variant-id");l(t)}),$(".cart").on("keyup",".cart-item__quantity",f(u,250)),$(".btn--cart-tab").click(function(){q(this),v()})}function e(t){$(".variant-selectors").on("change","select",function(a){var e=$(a.target),o=e.attr("name"),s=e.val();t.options.filter(function(t){return t.name===o})[0].selected=s;var l=t.selectedVariant,d=t.selectedVariantImage;n(t.title),i(d),r(l),c(l)})}function n(t){$("#buy-button-1 .product-title").text(t)}function i(t){var a=t?t.src:ShopifyBuy.NO_IMAGE_URI;$("#buy-button-1 .variant-image").attr("src",a)}function r(t){$("#buy-button-1 .variant-title").text(t.title)}function c(t){$("#buy-button-1 .variant-price").text("$"+t.price)}function o(t){t.preventDefault();var a,e=j.selectedVariant.id,n=p(e);a=n?n.quantity+1:1,h(j.selectedVariant,a),q(t.target),$("#checkout").focus()}function s(t,a){var e,n=j.variants.filter(function(t){return t.id===a})[0],i=p(n.id);i&&(e=t(i.quantity),g(i,e))}function l(t){s(function(t){return t-1},t)}function d(t){s(function(t){return t+1},t)}function u(t){var a=parseInt($(this).closest(".cart-item").attr("data-variant-id"),10),e=j.variants.filter(function(t){return t.id===a})[0],n=p(e.id),i=t.target.value;n&&g(n,i)}function f(t,a,e){var n;return function(){var i=this,r=arguments,c=function(){n=null,e||t.apply(i,r)},o=e&&!n;clearTimeout(n),n=setTimeout(c,a),o&&t.apply(i,r)}}function v(){$(".cart").addClass("js-active")}function m(){$(".cart").removeClass("js-active"),$(".overlay").removeClass("js-active")}function p(t){return x.lineItems.filter(function(a){return a.variant_id===t})[0]}function h(t,a){v();var e=p(t.id);e?g(e,a):y(t,a),k()}function g(t,a){var e=t.variant_id,n=x.lineItems.length;x.updateLineItem(t.id,a).then(function(a){var i=$(".cart").find('.cart-item[data-variant-id="'+e+'"]');a.lineItems.length>=n?(i.find(".cart-item__quantity").val(t.quantity),i.find(".cart-item__price").text(I(t.line_price))):i.addClass("js-hidden").bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){i.remove()}),k(),C(),a.lineItems.length<1&&m()}).catch(function(t){console.log("Fail"),console.error(t)})}function y(t,a){v(),x.addVariants({variant:t,quantity:a}).then(function(){var a=x.lineItems.filter(function(a){return a.variant_id===t.id})[0],e=_(a),n=$(".cart-item-container");n.append(e),setTimeout(function(){n.find(".js-hidden").removeClass("js-hidden")},0)}).catch(function(t){console.log("Fail"),console.error(t)}),C(),k()}function _(t){var a=$("#CartItemTemplate").html(),e=$(a),n=t.image.src;return e.attr("data-variant-id",t.variant_id),e.addClass("js-hidden"),e.find(".cart-item__img").css("background-image","url("+n+")"),e.find(".cart-item__title").text(t.title),e.find(".cart-item__variant-title").text(t.variant_title),e.find(".cart-item__price").text(I(t.line_price)),e.find(".cart-item__quantity").attr("value",t.quantity),e.find(".quantity-decrement").attr("data-variant-id",t.variant_id),e.find(".quantity-increment").attr("data-variant-id",t.variant_id),e}function b(){var t=$(".cart-item-container");t.empty();var a=($("#CartItemTemplate").html(),x.lineItems.map(function(t,a){return _(t)}));t.append(a),setTimeout(function(){t.find(".js-hidden").removeClass("js-hidden")},0),C()}function C(){$(".cart .pricing").text(I(x.subtotal))}function I(t,a,e,n,i){a=a||"$",e=e||",",n=n||".",i=i||".";var r=new RegExp("(\\d)(?=(\\d{3})+\\.)","g");return a+parseFloat(t,10).toFixed(2).replace(i,n).replace(r,"$1"+e).toString()}function k(){x.lineItems.length>0?($(".btn--cart-tab .btn__counter").html(x.lineItemCount),$(".btn--cart-tab").addClass("js-active")):($(".btn--cart-tab").removeClass("js-active"),$(".cart").removeClass("js-active"))}function q(t){w=t}var j,x,T,w,S=$(".product"),V=S.attr("data-product-handle"),E=$(".product-title"),N=$(".product-type"),F=$(".product-description"),B=$(".product-variants"),M=$(".product-price"),R=$(".product-image"),L=($(".add-to-cart"),ShopifyBuy.buildClient({apiKey:"031333422074d0234ac4be2f6c55285c",domain:"augusta-hammock-equine-art.myshopify.com",appId:"6"}));localStorage.getItem("lastCartId")?L.fetchCart(localStorage.getItem("lastCartId")).then(function(t){x=t,T=x.lineItems.length,b()}):L.createCart().then(function(t){x=t,localStorage.setItem("lastCartId",x.id),T=0}),L.fetchQueryProducts({handle:V}).then(function(o){S.attr("data-product-id",o[0].attrs.product_id),R.append('<img src="'+o[0].attrs.images[0].src+'">'),E.html(o[0].attrs.title),N.html(o[0].attrs.product_type),F.html(o[0].attrs.body_html);var s=o[0].variants;$.each(s,function(t,a){var e='<li class="variant" data-price="$'+a.price+'" data-variant-id="'+a.id+'">'+a.title+"</li>";0==t&&(M.html("$"+a.price),e='<li class="variant selected" data-price="$'+a.price+'" data-variant-id="'+a.id+'">'+a.title+"</li>"),B.append(e)}),$(".select-arrow").on("click",function(){B.hasClass("open")||B.addClass("open")}),B.find("li").on("click",function(t){B.hasClass("open")?(B.find("li").removeClass("selected"),$(t.currentTarget).addClass("selected"),B.removeClass("open"),M.html($(t.currentTarget).attr("data-price"))):B.addClass("open")}),$(document).on("click",function(t){"product-variants"!=t.target.className&&"variant"!=t.target.className&&"variant selected"!=t.target.className&&"select-arrow"!=t.target.className&&B.removeClass("open")}),o=fetchedProduct;var l=o.selectedVariant,d=o.selectedVariantImage,u=(o.options,t(o));$(".variant-selectors").html(u),n(o.title),i(d),r(l),c(l),e(o),k(),a()}).catch(function(t){console.log("Request failed"),console.log(t)})});